{% load static %}
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>InscriÃ§Ãµes | POT</title>
  <link rel="stylesheet" href="{% static 'style.css' %}">
</head>
<body>
  <header>
    <h1>Plataforma de Torneios</h1>
    <nav>
      <a href="{% url 'painel' %}">ğŸ  InÃ­cio</a>
      <a href="{% url 'criar_torneio' %}">âš’ï¸ Criar Torneio</a>
      <a href="{% url 'inscricoes' %}">ğŸ“ InscriÃ§Ãµes</a>
      {% if torneios %}
        <a href="{% url 'chaveamento' torneios.0.id %}">ğŸ“Š Chaveamento</a>
      {% endif %}
      <a href="{% url 'dashboard_equipe' %}">ğŸ§‘â€ğŸ’¼ Minha Equipe</a>
      <a href="{% url 'logout' %}" style="color:#d62828;">ğŸšª Sair</a>
    </nav>
  </header>

  <main class="form-container">
    <h2>Inscrever Equipe em Torneio</h2>

    {% if messages %}
      {% for message in messages %}
        <div style="padding: 10px; margin-bottom: 15px; border-radius: 5px; {% if message.tags == 'error' %}background-color: #f8d7da; color: #721c24;{% else %}background-color: #d4edda; color: #155724;{% endif %}">
          {{ message }}
        </div>
      {% endfor %}
    {% endif %}

    {% if not equipes %}
      <div style="background-color: #fff3cd; border-left: 4px solid #ffc107; padding: 15px; border-radius: 5px; margin-bottom: 20px;">
        <p><strong>âš ï¸ VocÃª ainda nÃ£o tem nenhuma equipe criada.</strong></p>
        <p>Para participar de um torneio, vocÃª precisa criar uma equipe primeiro.</p>
        <a href="{% url 'criar_equipe' %}"><button style="background-color: #007bff; color: white; padding: 8px 15px; border: none; border-radius: 4px; cursor: pointer; margin-top: 10px;">Criar Equipe Agora</button></a>
      </div>
    {% else %}
      <form class="form-box" method="POST">
        {% csrf_token %}
        
        <label>Sua Equipe:</label>
        <select name="equipe" required>
          <option selected disabled>Selecione sua equipe</option>
          {% for e in equipes %}
            <option value="{{ e.id }}">{{ e.nome }} ({{ e.jogo_principal }})</option>
          {% endfor %}
        </select>

        <label>Torneio:</label>
        <select name="torneio" required>
          <option selected disabled>Selecione um torneio</option>
          {% for t in torneios %}
            <option value="{{ t.id }}">{{ t.nome }} - {{ t.data|date:"d/m/Y" }} ({{ t.get_status_display }})</option>
          {% empty %}
            <option disabled>Nenhum torneio disponÃ­vel</option>
          {% endfor %}
        </select>

        <button type="submit">Confirmar InscriÃ§Ã£o</button>
      </form>

      <div style="margin-top: 30px; text-align: center;">
        <a href="{% url 'criar_equipe' %}"><button style="background-color: #28a745; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer;">â• Criar Nova Equipe</button></a>
      </div>
    {% endif %}
  </main>
</body>
</html>